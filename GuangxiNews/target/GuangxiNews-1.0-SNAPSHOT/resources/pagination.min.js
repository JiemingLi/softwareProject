$define([],function($){var init=function(){var Pagination={uri:"",pageSize:10,currentPage:1,totalPages:0,initUri:function(n){this.uri=n},initPagination:function(n,i,a){this.pageSize=null==n||"undefined"==n?10:n,this.currentPage=null==i||"undefined"==i?1:i,this.totalPages=null==a||"undefined"==a?0:a},next:function(n,i,a,t,e,r){this.filter({moudleReg:"companyplace/",callBacK:function(n,i){i.uri=n}},this,r);var o=this.uri,s=parseInt(n)+1;i<s&&(s=i),o=compositeUrl(o,a,s,r),this.hashChange(s,t),"function"==typeof e||"string"==typeof e?(invokeCallback(e,o,r),Pagination.currentPage=s,$(window).scrollTop($("#c_"+t).offset().top)):(asyncSubmit(o,"POST",t,r),Pagination.currentPage=s)},pre:function(n,i,a,t,e,r){this.filter({moudleReg:"companyplace/",callBacK:function(n,i){i.uri=n}},this,r);var o=this.uri,s=n-1;s<=0&&(s=1),o=compositeUrl(o,a,s,r),this.hashChange(s,t),"function"==typeof e||"string"==typeof e?(invokeCallback(e,o,r),Pagination.currentPage=s,$(window).scrollTop($("#c_"+t).offset().top)):(asyncSubmit(o,"POST",t,r),Pagination.currentPage=s)},jump:function(n,i,a,t,e){if(Pagination.currentPage!=parseInt(n)){this.filter({moudleReg:"companyplace/",callBacK:function(n,i){i.uri=n}},this,e);var r=compositeUrl(this.uri,i,n,e);this.hashChange(parseInt(n),a),"function"==typeof t||"string"==typeof t?(invokeCallback(t,r,e),Pagination.currentPage=parseInt(n),$(window).scrollTop($("#c_"+a).offset().top)):(asyncSubmit(r,"POST",a,e),Pagination.currentPage=parseInt(n))}},ajax:function(){var n=compositeUrl(this.uri,this.pageSize,this.currentPage,this.params);asyncSubmit(n,"POST",this.divid,this.params)},filter:function(n,i,a){a.params&&a.params.url&&-1!=a.params.url.indexOf(n.moudleReg)&&n.callBacK(a.params.url,i)},hashChange:function(n,i){if(!Pagination.isHashChange){Pagination.isPopstateChange=!0;var a=location.hash.split("#");if(-1==location.hash.indexOf("#c_"+i))location.hash=location.hash+"#c_"+i+"-"+n;else{for(var t=0;t<a.length;t++)-1!=a[t].indexOf("c_"+i)&&(a[t]="c_"+i+"-"+n);location.hash=a.join("#")}Pagination.isPopstateChange=!1}}};invokeCallback=function(n,i,a){invokeInner(n,i,a)},invokeInner=function(callback,url,params){var isFun=!0;if("function"==typeof callback?isFun=!0:"string"==typeof callback&&(isFun=!1),isFun)callback(url,params);else{var strobj=JSON.stringify(params);eval(callback+"('"+url+"',("+strobj+"))")}},compositeUrl=function(n,i,a,t){return t.keymapping?n.indexOf("?")<=0?n+"?"+t.keymapping.pageSize+"="+i+"&"+t.keymapping.currentPage+"="+a:n+"&"+t.keymapping.pageSize+"="+i+"&"+t.keymapping.currentPage+"="+a:n.indexOf("?")<=0?n+"?pageSize="+i+"&currentPage="+a:n+"&pageSize="+i+"&currentPage="+a};var getPClass=function(n){for(var i=n.className.split(" "),a=0;a<i.length;a++)if("p_"==i[a].substring(0,2))return i[a]};return refreshDom=function(n,i,a){var t,e="c_"+i;if(a.contentObj){var r=getPClass(a.contentObj.get(0)),o=$("<div>").html(n);t=o.find("."+r).children(),a.noJs||(t=t.add(o.find("script"))),a.contentObj.html(t)}else $("#"+e).html(),$("#"+e).html(n);return $(window).scrollTop($("#"+e).offset().top),t},asyncSubmit=function(n,i,a,t){$.ajax({url:n,type:i,data:t.data,beforeSend:function(n){},error:function(n,i,a){},success:function(n){var i=refreshDom(n,a,t);t.successFun&&t.successFun(i)}})},Pagination};return{init:init}});